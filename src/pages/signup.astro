---
export const prerender = false;

import { db, EmailSignup } from "astro:db";

if (Astro.request.method === "POST") {
  // Parse form data
  const formData = await Astro.request.formData();
  const email = formData.get("email");
  if (typeof email === "string") {
    // Insert form data into the EmailSignup table
    await db.insert(EmailSignup).values({ email });
  }
}

if (import.meta.env.DEV) {
  return Astro.redirect("/thank-you");
} else {
  return Astro.redirect("https://getkontinue.com/thank-you");
}
---
